/*! by da宗熊 MIT v1.0.5 update:2020/12/11 git:https://github.com/linfenpan/filter-select */
!function(e,t,n){e.AutoComplete=function(e){function t(){}function n(e,t,n){var i=e.getElementsByTagName(t);return n===h?i:i[n]}function i(e,t,n){if(n===h)return e.getAttribute(t);e.setAttribute(t,n)}function a(e,t){if("string"==typeof t)return e.style[t];var n=t;for(var i in n)n.hasOwnProperty(i)&&(e.style[i]=n[i])}function l(e,t){e.className=e.className.replace(new RegExp("\\s*\\b"+t+"\\b","g"),"")}function o(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)}function u(e,t){o(e,t)||(e.className+=" "+t)}function s(e,t){for(var n=0,i=e.length;n<i;n++)t.call(e,e[n],n)}function f(){for(var e=[].slice.call(arguments,0),t=e[0],n=1,i=e.length;n<i;n++){var a=e[n];for(var l in a)a.hasOwnProperty(l)&&(t[l]=a[l])}return t}function r(e){return e.replace(/^\s*|\s*$/g,"")}function c(e,t,n){window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function p(e,t,n){window.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function v(e,i){var a=this;a.$root=e,i=a.options=f({data:function(e,t){t([])},callbackSelect:t,callbackChange:t,callbackShow:t,callbackHide:t,clearAtFocus:!0,resetOnHide:!0,placeholder:"请选择",defaultValue:"",defaultText:"",emptyInput:!1,changeAsSelect:!1,selectFirst:!0,freeInput:!0,minIndex:-1},i||{}),i.freeInput&&(i.defaultValue=i.defaultText),e.innerHTML=['<div class="m-placeholder" style="display:none;"></div>','<input type="text" class="m-input" autocomplete="off" disableautocomplete value="" />','<input type="hidden" class="m-input-hidden" autocomplete="off" disableautocomplete value="" />','<span class="m-input-ico" style="display:none;"></span>','<ul class="m-list" style="display:none;"></ul>'].join(""),u(e,"m-input-select"),a.$input=n(e,"input",0),a.$value=n(e,"input",1),a.$tip=n(e,"div",0),a.$ico=n(e,"span",0),a.$ul=n(e,"ul",0),a._f3=i.minIndex,a._f4=i.defaultText,a._f5=i.defaultValue,a._f6()}var h=void 0,d="m-list-item-active";return v.prototype={_f6:function(){var e=this;e.reset(),e._f7()},reset:function(){var e=this;e._f8=0,e.isShow=!1,e.setPlaceholder(e.options.placeholder),e._f9(),a(e.$ul,{display:"none"});var t=e.options,n=t.defaultValue;null!=n&&e.setValue(n)},setPlaceholder:function(e){this.$tip.innerHTML=e},_f10:function(){a(this.$tip,{display:"none"})},_f9:function(){a(this.$tip,{display:"block"})},_f7:function(){function e(){return!n.isDisabled()}function t(t,i){if(!t.propertyName||"value"==t.propertyName.toLowerCase()){var o=!1;if("propertychange"===t.type&&new Date-l<=10&&(o=!0),o||(n._f14=!1),e()){var u=r(a.value);u?n._f10():n._f9(),n._f16(u),n._f17(),n.isShow||n.show()}}}var n=this,i=n.options,a=n.$input;c(n.$ul,"click",function(e){var t=e.srcElement||e.target;"li"==t.tagName.toLowerCase()&&(n._f11(t),n.hide())}),c(n.$ico,"click",function(){e()&&(n.isShow?n.hide():(a.focus(),n.show()))}),c(a,"focus",function(l){e()&&(i.clearAtFocus&&(a.value=""),n.show(),t.call(this,l))});var l=0;c(a,"keydown",function(t){if(e()){l=new Date;var a=!1,o=!1,u=t.keyCode;switch(!n.options.changeAsSelect||38!==u&&40!==u||(n._f14=!0),u){case 38:n.prev(),a=!0;break;case 40:n.next(),a=!0;break;case 13:n._f11(n.$lis[n._f15()]),n.hide(),o=!0}return a&&i.callbackChange(n._f8),a||o?(t.preventDefault?t.preventDefault():(t||window.event).returnValue=!1,!1):void 0}}),c(a,"input",t),setTimeout(function(){c(a,"propertychange",t)},200)},_f16:function(e){var t=this,i=t.options,a=i.freeInput;if(!t._f14){var l=[];i.data.call(this,e,function(e){s(e,function(e){l.push('<li class="m-list-item" data-value="'+(a?e.value:e.id)+'">'+e.value+"</li>")});var i=t.$ul;i.innerHTML=l.join(""),t.$lis=n(i,"li"),t.length=t.$lis.length})}},_f17:function(e){var t=this;e=e||t._f18(),t.options.selectFirst&&(e=e<0?0:e),t._f8=e;var n=t.$lis[t._f8];n&&(u(n,d),t._f19())},_f19:function(){var e=this,t=e.$ul,n=e.$lis,i=e._f15();t.scrollTop=i>=0&&n[0]?n[0].clientHeight*i:0},_f20:function(e){var t=this,n=t.$lis,i=n.length,a=t._f3;e<=a?e=a:e>=i&&(e=i-1);var o=t._f15();o>=0&&l(n[o],d);var s=n[e];s&&(u(s,d),t._f19()),t._f8=e,t.options.changeAsSelect&&t._f11(t.$lis[e])},_f11:function(e){var t,n=this;e?(e.innerHTML,t=i(e,"data-value")):t=n.options.freeInput?n.$input.value:n.options.emptyInput?"":n.$value.value,n.setValue(t)},_f15:function(){for(var e=this,t=0;t<e.length;t++){if(o(e.$lis[t],d))return t}return-1},_f18:function(){for(var e=this,t=e.getValue(),n=0;n<e.length;n++){var l=e.$lis[n];if(t==i(l,"data-value")&&"none"!=a(l,"display"))return n}return-1},next:function(){return this._f20(this._f8+1)},prev:function(){return this._f20(this._f8-1)},hide:function(){var e=this;e._f14=!1,a(e.$ul,{display:"none"}),e._f10(),e.options.resetOnHide&&(e.options.emptyInput&&""===e.$input.value?e.setValue(""):e.setValue(e.$value.value)),e._f21(),e._f22&&e._f22(),e.isShow&&e.options.callbackHide.call(e),e.isShow=!1},show:function(e){var t=this;t._f14=!1,t._f16(t.$input.value),a(t.$ul,{display:"block"}),t._f23(),!t.isShow&&t.options.callbackShow.call(t),t.isShow=!0},getValue:function(){return this.$value.value},setValue:function(e){var t=this;if(t.$value.value=e,e&&t._f10(),t._f16(""),0==t.length&&!t.options.freeInput||t.options.freeInput&&""===e){var n=t.$tip.innerHTML;t.options.freeInput&&""===e&&(t.$value.value=n),t._f24(n)}else{if(t.$lis){var a=t.$lis[t._f15()];a&&l(a,d)}for(var o=!1,s=0,f=t.length;s<f;s++){var c=t.$lis[s];if(i(c,"data-value")==e){u(c,d),t._f24(r(c.innerHTML)),o=!0;break}}o||t._f24(e)}t._f5!=e&&t._f21()},_f24:function(e){var t=this,n=t.$input,i=t.options.placeholder;e===i||t.options.emptyInput||e&&(i=e),n.value=e,t.setPlaceholder(i),e?t._f10():t._f9()},setDisabled:function(e){this.$input.disabled=e},isDisabled:function(){var e=this.$input;return e.disabled||e.readOnly},_f23:function(){function e(){p(l,a,t)}function t(t){if(!i.$ul)return e();var n=t.srcElement||t.target;"li"===n.tagName.toLowerCase()&&(n=n.parentNode),n!=i.$input&&n!=i.$ico&&n!=i.$ul&&(i.hide(),e())}function n(){e(),c(l,a,t)}var i=this,a="mouseup",l=document.getElementsByTagName("body")[0];i._f22=e,i._f23=n,n()},_f21:function(){var e=this,t=e.getValue();if(e._f5!==t){e._f5=t;var n=r(e.$tip.innerHTML);e.options.emptyInput&&(n=e.$input.value),e.options.callbackSelect(t,n)}}},v}(e)}(window);